{% extends "templates/web.html" %}

{% block title %}Public Reports Archive{% endblock %}

{% block style %}
<style>
:root {
    --grm-bg: #FFFFFF;
    --grm-bg-alt: #F8F8F8;
    --grm-border: #EDEDED;
    --grm-text: #171717;
    --grm-text-secondary: #525252;
    --grm-text-muted: #7C7C7C;
    --grm-accent: #2490EF;
    --grm-radius: 8px;
    --grm-radius-sm: 6px;
}

/* Nav strip */
.grm-nav { display:flex; align-items:center; gap:4px; padding:10px 20px; border-bottom:1px solid var(--grm-border); margin:-15px -15px 32px -15px; background:var(--grm-bg); flex-wrap:wrap; }
.grm-nav-brand { font-size:14px; font-weight:600; color:var(--grm-text); text-decoration:none; margin-right:auto; white-space:nowrap; }
.grm-nav-brand:hover { color:var(--grm-text); text-decoration:none; }
.grm-nav-link { display:inline-flex; align-items:center; gap:6px; padding:6px 12px; font-size:13px; font-weight:500; color:var(--grm-text-secondary); text-decoration:none; border-radius:var(--grm-radius-sm); transition:background .15s,color .15s; white-space:nowrap; }
.grm-nav-link:hover { background:var(--grm-bg-alt); color:var(--grm-text); text-decoration:none; }
.grm-nav-link.active { background:var(--grm-bg-alt); color:var(--grm-accent); }
.grm-nav-link svg { width:16px; height:16px; flex-shrink:0; }

/* Page header */
.grm-page-header { margin-bottom:24px; }
.grm-page-header h1 { font-size:22px; font-weight:600; color:var(--grm-text); margin:0 0 4px 0; }
.grm-page-header p { font-size:14px; color:var(--grm-text-muted); margin:0; }

/* Report list */
.grm-report-list {
    display: flex;
    flex-direction: column;
    gap: 0;
    border: 1px solid var(--grm-border);
    border-radius: var(--grm-radius);
    overflow: hidden;
}
.grm-report-row {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 12px 18px;
    border-bottom: 1px solid var(--grm-border);
    transition: background .1s;
}
.grm-report-row:last-child { border-bottom: none; }
.grm-report-row:hover { background: var(--grm-bg-alt); }
.grm-report-type {
    display: inline-block;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    padding: 3px 8px;
    border-radius: 4px;
    background: var(--grm-bg-alt);
    color: var(--grm-text-secondary);
    flex-shrink: 0;
    min-width: 70px;
    text-align: center;
}
.grm-report-info { flex: 1; min-width: 0; }
.grm-report-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--grm-text);
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.grm-report-meta {
    font-size: 12px;
    color: var(--grm-text-muted);
    margin: 2px 0 0 0;
}
.grm-report-download {
    flex-shrink: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: var(--grm-radius-sm);
    color: var(--grm-accent);
    text-decoration: none;
    transition: background .15s;
    min-height: 44px;
    min-width: 44px;
}
.grm-report-download:hover { background: var(--grm-bg-alt); text-decoration: none; }
.grm-report-download svg { width: 18px; height: 18px; }

/* Empty state */
.grm-empty-state {
    text-align: center;
    padding: 60px 20px;
}
.grm-empty-state svg {
    width: 48px;
    height: 48px;
    color: var(--grm-border);
    margin-bottom: 16px;
}
.grm-empty-state h3 {
    font-size: 16px;
    font-weight: 600;
    color: var(--grm-text-secondary);
    margin: 0 0 6px 0;
}
.grm-empty-state p {
    font-size: 14px;
    color: var(--grm-text-muted);
    margin: 0;
}
</style>
{% endblock %}

{% block page_content %}
<div class="container">
    <!-- Nav strip -->
    <nav class="grm-nav">
        <a href="/grm-public" class="grm-nav-brand">GRM Portal</a>
        <a href="/grm-public/dashboard" class="grm-nav-link">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
            Dashboard
        </a>
        <a href="/grm-public/track-complaint" class="grm-nav-link">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            Track
        </a>
        <a href="/grm-public/submit-grievance" class="grm-nav-link">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
            Submit
        </a>
        <a href="/grm-public/reports" class="grm-nav-link active">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
            Reports
        </a>
    </nav>

    <!-- Page header -->
    <div class="grm-page-header">
        <h1>Reports Archive</h1>
        <p>Historical monthly and quarterly transparency reports.</p>
    </div>

    {% if reports %}
    <div class="grm-report-list">
        {% for report in reports %}
        <div class="grm-report-row">
            <span class="grm-report-type">{{ report.type }}</span>
            <div class="grm-report-info">
                <p class="grm-report-name">{{ report.type }} Report &mdash; {{ report.date }}</p>
                <p class="grm-report-meta">{{ report.project }}{% if report.filename %} &middot; {{ report.filename }}{% endif %}</p>
            </div>
            <a href="{{ report.url }}" target="_blank" class="grm-report-download" title="Download PDF">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="grm-empty-state">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
        <h3>No Reports Available</h3>
        <p>Public reports will appear here once generated.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
